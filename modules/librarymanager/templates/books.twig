<h2>ðŸ“š Manage Books</h2>

<h3>Add New Book</h3>
<form method="POST">
  {{ csrfInput() }}
  <input type="hidden" name="action" value="entries/save-entry">
  <input type="hidden" name="section" value="books"> {# âœ… This works #}
  <input type="hidden" name="enabled" value="1">

  <label>Title:</label>
  <input type="text" name="title" required><br>

  <label>Author:</label>
  <input type="text" name="fields[author]" required><br>

  <label>ISBN:</label>
  <input type="text" name="fields[isbn]" required><br>

  <label>Is Borrowed (initial):</label>
  <input type="checkbox" name="fields[isBorrowed]" value="1"><br>

  <button type="submit">Add Book</button>
</form>

<hr>

<h3>ðŸ“‹ List of Books</h3>

{% set books = craft.entries.section('books').all() %}

<table border="1" cellpadding="8">
  <thead>
    <tr>
      <th>Title</th><th>Author</th><th>ISBN</th><th>Status</th><th>Actions</th>
    </tr>
  </thead>
  <tbody>
    {% for book in books %}
      <tr>
        <td>{{ book.title }}</td>
        {# <td>{{ book.booksTitle }}</td> #}
        <td>{{ book.author }}</td>
        <td>{{ book.isbn }}</td>
        <td>
          {% if book.isBorrowed %}
            <span style="color:red">Borrowed</span>
          {% else %}
            <span style="color:green">Available</span>
          {% endif %}
        </td>
        <td>
          <!-- Delete -->
          <form method="POST" style="display:inline;">
            {{ csrfInput() }}
            <input type="hidden" name="action" value="entries/delete">
            <input type="hidden" name="elementId" value="{{ book.id }}">
            <button type="submit" onclick="return confirm('Delete this book?')">ðŸ—‘ Delete</button>
          </form>
        </td>
      </tr>
    {% else %}
      <tr><td colspan="5">No books found.</td></tr>
    {% endfor %}
  </tbody>
</table>
